---
name: Linting

on:
  pull_request:
    branches: [ main ]
  push:
    branches: [ main ]

env:
  POETRY_VERSION: 1.7.1
  PYTHON_VERSION: 3.12

jobs:
   Linting:
     runs-on: ubuntu-latest
     steps:
       # checkout repo
       - name: Checkout repository
         uses: actions/checkout@v3
         with:
           ref: ${{ github.head_ref }}
       # install poetry
       - name: Install poetry
         run: pipx install poetry==${{ env.POETRY_VERSION }}
         # set up python with cache
       - name: Setup python ${{ env.PYTHON_VERSION }}
         uses: actions/setup-python@v4
         with:
           python-version: '${{ env.PYTHON_VERSION }}'
           cache: 'poetry'
       # Install requirements (including dev-dependencies)
       - name: Install requirements
         run: poetry install --with lint
       - name: Run linters
         run: |
           set -o pipefail
           poetry run make lint


